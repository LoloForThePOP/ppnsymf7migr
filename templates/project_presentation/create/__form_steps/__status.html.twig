<div class="status-choice-container text-center my-4">

    <h3 class="mb-1">O√π en est votre projet&nbsp;?</h3>
    <div class="fs-6 text-muted mb-4">Vous pourrez apporter des pr√©cisions plus tard</div>


    <div class="d-flex justify-content-center gap-4 mx-4 mx-md-0">

        {# button: IDEA #}
        <button type="button"
                class="status-choice-btn status-choice-idea p-4"
                data-value="idea">
            <div class="fs-3">üí°</div>
            <div class="fw-bold mt-2">C'est une id√©e</div>
        </button>

        {# button: PRODUCTION #}
        <button type="button"
                class="status-choice-btn status-choice-production p-4"
                data-value="production">
            <div class="fs-3">‚öôÔ∏è</div>
            <div class="fw-bold mt-2">Le concret est lanc√©</div>
        </button>

    </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', function () {

    const buttons = document.querySelectorAll('.status-choice-btn');
    const input = document.querySelector('#project_presentation_creation_initialStatus');// hidden field updated when user chooses a status
    const form = document.querySelector('form[name="project_presentation_creation"]');
    let warningEl = null;

    buttons.forEach(btn => {

        btn.addEventListener('click', function () {

            //Refreshing ui 
            buttons.forEach(b => b.classList.remove('selected'));
            this.classList.add('selected');

            const value = this.dataset.value;
            input.value = value;
            
        });

    });

    // Prevent submit if no status selected
    if (form && input) {
        form.addEventListener('submit', function (e) {
            if (!input.value) {
                e.preventDefault();
                // lazy create warning message
                if (!warningEl) {
                    warningEl = document.createElement('div');
                    warningEl.className = 'alert alert-warning mt-3';
                    warningEl.textContent = 'Merci de s√©lectionner un statut pour continuer.';
                    form.querySelector('.action-buttons-container')?.insertAdjacentElement('beforebegin', warningEl);
                }
                warningEl.hidden = false;
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } else if (warningEl) {
                warningEl.hidden = true;
            }
        });
    }

});
</script>
