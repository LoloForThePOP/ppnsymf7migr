
<div class="mb-4">

    <h5>üñºÔ∏è Ajoutez une image d'illustration (si vous en avez une)</h5>
    
    <div class="mt-3 mb-4 pb-3">

        <small class="fs-6 text-muted">Vous pourrez en ajouter d'autres plus tard</small>
    
    </div>

</div>

{% set uploadIconId = "upload-icon" %}


<div class="container col-md-6 text-center">

    <div class="mb-4">

        {# Image Upload Icon #}

        <div id="{{uploadIconId}}" class="add-image-square">
            <span class="pp-create-upload-icon" role="img" aria-label="Image icon"></span>

            <div class="plus-sign">+</div>
        
        </div>

        <div class="d-none">{{ form_row(form.imageSlide.imageFile) }}</div>

        <div id="preview-container" class="d-flex justify-content-center">
            <img id="preview" src="" alt="Preview">
        </div>


        <script>

            // Image Upload Handling

            document.addEventListener('DOMContentLoaded', () => {

                const icon  = document.getElementById({{uploadIconId|json_encode|raw}});
                const input = document.getElementById({{form.imageSlide.imageFile.vars.id|json_encode|raw}});
                    const preview  = document.getElementById('preview');

                // When the icon is clicked, simulate a click on the hidden input
                icon.addEventListener('click', () => {
                    input.click();
                });

                // Optional: handle the file once chosen
                input.addEventListener('change', (event) => {
                    const file = event.target.files[0];
                    if (file) {
                        console.log('Selected file:', file.name);
                        // You can preview or upload here:
                        if (!file.type.startsWith('image/')) {
                            alert("Veuillez s√©lectionner une image.");
                            return;
                        }

                        const reader = new FileReader();
                        reader.onload = e => {
                            preview.src = e.target.result;
                            preview.style.display = "block";
                        };
                        reader.readAsDataURL(file);
                    }
                });

            });

        </script>
    
    </div>

</div>
