
{# statuses catalog #}
{% set catalog = constant('App\\\Enum\\\ProjectStatuses::CATALOG') %}


{% set thisProjectActiveStatuses = presentation.getStatuses() %}

{# to do : remove project id in data-project-id AND data-update-url, use stringId instead #}

<div id="project-statuses-editor"
     class="project-statuses"
     data-project-id="{{ presentation.id }}"
     data-update-url="{{ path('ajax_project_statuses_update', { id: presentation.id }) }}">

    {% for category in catalog %}

        <div class="status-category mb-4">

            <h5 class="fw-bold text-muted mb-2">
                {{ category.categoryLabels.description_fr }}
            </h5>

            <div class="d-flex flex-wrap gap-2">

                {% for item in category.items %}

                    {% set isActive = item.uniqueName in thisProjectActiveStatuses %}

                    <div class="status-pill px-3 py-2 rounded-pill {{ isActive ? 'active' }}"
                         data-status="{{ item.uniqueName }}"
                         style="background-color: {{ item.bg_color }};"
                         title="{{ item.description_fr }}">
                        {{ item.short_description_fr }}
                    </div>

                {% endfor %}

            </div>

        </div>

    {% endfor %}


    <div class="mt-3">

        <label for="status-remarks-textarea" class="form-label fw-bold">Détail sur l’avancement :</label>

        <textarea 
        
            id="status-remarks-textarea"
            class="form-control"
            rows="3"
            placeholder="Ajoutez des précisions sur votre avancement...">{{ presentation.statusRemarks }}
                  
        </textarea>

        <small class="text-muted d-none" id="remarks-feedback"></small>

    </div>

</div>



<style>

.project-statuses {
    margin-top: 1rem;
}

.status-pill {
    font-size: 0.9rem;
    color: #222;
    border: 1px solid rgba(0,0,0,0.05);
    box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    cursor: default;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.status-pill:hover {
    transform: translateY(-2px);
    box-shadow: 0 2px 6px rgba(0,0,0,0.12);
}


.status-pill.active {
    outline: 2px solid #4b9c3f;
    font-weight: 600;
}



</style>

  
