{% block stylesheet %}

    <link href="/css/website_card.css" rel="stylesheet">

{% endblock %}


{% embed "/project_presentation/edit_show/skeletons/structure_content.html.twig" with {'iconName': "websites", 'title': "Adresses Web",} %}

    {% block editButtons %}

        {# Add website button (triggers a modal) #}

        <span class="pp-edit-actions">
            <button data-bs-toggle="modal" data-bs-target="#newWebsiteFormModal" class="pp-edition-mode plus-btn btn btn-light btn-sm"><span class="plus-sign">+</span></button>

            {% if countWebsites == 0 %}

            <button
                type="button"
                class="pp-edition-mode pp-info-tooltip"
                data-bs-toggle="popover"
                data-bs-trigger="click"
                data-bs-placement="top"
                data-bs-custom-class="pp-info-tooltip-popover"
                data-bs-content="{{ 'Si vous utilisez déjà un site web ou des réseaux sociaux pour parler de votre projet ou faire progresser votre projet, ajoutez-les ici. Exemples de sites web : site vitrine, blog, boutique en ligne, page de collecte de fonds. Exemples de réseaux sociaux : Facebook, Twitter, Instagram, LinkedIn, TikTok, YouTube. Autres exemples : Github, Discord, Trello.'|e('html_attr') }}"
                aria-label="Vous utilisez déjà un site web ou des réseaux sociaux pour votre projet ? Ajoutez-les ici."
            >
                <img class="pp-info-tooltip-icon icon-themed icon-strong" src="{{ asset('info-non-circled.svg', 'misc') }}" alt="" aria-hidden="true">
            </button>

            {% endif %}
        </span>

    {% endblock %}

    {% block deleteElementsButtons %}

        {% if countWebsites > 0 %}
        
            {{ parent() }}
        
        {% endif %}

    {% endblock %}

    {% block mainContent %}

        <div
            id="websites"
            class="js-elements-list pp-struct-content row m-0"
            data-structure="websites"
        >

            {% if countWebsites > 0 %}
                
                {% set websites = presentation.getOtherComponents().getComponents('websites') %}

                {% for website in websites %}

                        {% if loop.index == 3  and not userPresenter %}
                        
                            <div id="collapse-websites" class="collapse no-transition px-0">

                        {% endif %}
                    
                        <div id="{{website.id}}" class="js-sortable-element pp-website-card d-flex align-items-center">

                            {% include "project_presentation/edit_show/websites/card_content.html.twig" %}

                            {# Display website on click in a blank tab #}

                            {% set safeUrl = website.url|safe_href %}
                            <a
                                data-website-link="{{website.id}}"
                                {% if safeUrl %}href="{{ safeUrl }}"{% endif %}
                                target="_blank"
                                rel="noopener noreferrer nofollow"
                                class="pp-consultation-mode coverable-link"
                            ></a>

                            {% if userPresenter %}
                                
                                {# Delete website (Red Cross) button #}

                                <button
                                    type="button"
                                    data-structure="websites"
                                    class="js-delete-element delete-button pp-edition-mode btn"
                                    data-id="{{website.id}}"
                                >&times;</button>                  
                            
                            {% endif %}


                        </div>

                        {% if loop.index > 2 and loop.last and not userPresenter %}

                            </div>
                            
                            <div class="js-elements-list show-more-button-container container mt-3 mb-2" onclick="this.style.display = 'none'">

                                <a class="show-more-button" data-bs-toggle="collapse" data-bs-target="#collapse-websites" aria-expanded="false" aria-controls="collapse-websites">Afficher plus</a>
                            
                            </div>
                        
                        {% endif %}
                    
                {% endfor %}
                
            {% endif %}

        </div>


        <style>

            #websites{

                display: flex;
                justify-content: center;
                padding-left: 0;

            }

            #collapse-websites.show{

                display: flex;
                flex-direction: column;
                align-items: center;

            }

        </style>

    {% endblock %}
    
{% endembed %}
